import{Q as x,o as y,p as b,s as M,t as q,h as n,v as h,a as i,w as F,u as p,l as c,q as u}from"./index-BMILiYWd.js";var R=class extends x{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:y()})}getOptimisticResult(e){return e.behavior=y(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:s}=e,a=super.createResult(e,t),{isFetching:r,isRefetching:v,isError:g,isRefetchError:T}=a,o=s.fetchMeta?.fetchMore?.direction,d=g&&o==="forward",l=r&&o==="forward",f=g&&o==="backward",P=r&&o==="backward";return{...a,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:M(t,s.data),hasPreviousPage:b(t,s.data),isFetchNextPageError:d,isFetchingNextPage:l,isFetchPreviousPageError:f,isFetchingPreviousPage:P,isRefetchError:T&&!d&&!f,isRefetching:v&&!l&&!P}}};function N(e,t){return q(e,R)}const m=async(e,t)=>n(i.get("/transactions",{params:e,signal:t}),F),Q=async e=>n(i.get(`/transactions/${e}`),h),w=async e=>n(i.post("/transactions",e),h),E=async(e,t)=>n(i.patch(`/transactions/${e}`,t),h),K=async e=>n(i.delete(`/transactions/${e}`)),A=({perPage:e,userId:t})=>N({queryKey:["transactions","infinite",e,t],queryFn:({pageParam:s=1})=>m({page:s,perPage:e}),initialPageParam:1,getNextPageParam:s=>{if(!s.pagination)return;const{page:a,totalPages:r}=s.pagination;return a<r?a+1:void 0},enabled:!!t,staleTime:1e3*60*5}),k=({userId:e})=>p({queryKey:["transactions","all",e],queryFn:({signal:t})=>m({},t),enabled:!!e,staleTime:1e3*60*5}),B=()=>{const e=c({mutationFn:a=>w(a),onSettled:()=>{u.invalidateQueries({queryKey:["transactions"]})}}),t=c({mutationFn:a=>K(a),onSettled:()=>{u.invalidateQueries({queryKey:["transactions"]})}}),s=c({mutationFn:({id:a,payload:r})=>E(a,r),onSettled:()=>{u.invalidateQueries({queryKey:["transactions"]})}});return{createTx:e.mutateAsync,createTxErrorMessage:e.error?.message,isCreating:e.isPending,deleteTx:t.mutateAsync,deleteTxErrorMessage:t.error?.message,isDeleting:t.isPending,updateTx:s.mutateAsync,updateTxErrorMessage:s.error?.message,isUpdating:s.isPending}},C=({id:e,enabled:t=!0})=>p({queryKey:["transactions","detail",e],queryFn:()=>{if(!e)throw new Error("ID is required");return Q(e)},enabled:!!e&&t,staleTime:1e3*60*5});export{C as a,B as b,A as c,k as u};
